{"version":3,"sources":["index.tsx"],"names":["React","Animated","BackHandler","Easing","StyleSheet","TouchableWithoutFeedback","View","ActionGroup","OPACITY_ANIMATION_IN_TIME","OPACITY_ANIMATION_OUT_TIME","EASING_OUT","bezier","EASING_IN","out","ActionSheet","_actionSheetHeight","state","isVisible","isAnimating","options","onSelect","overlayOpacity","Value","sheetOpacity","_setActionSheetHeight","nativeEvent","layout","height","_selectCancelButton","cancelButtonIndex","_onSelect","_animateOut","index","removeEventListener","setState","parallel","timing","toValue","easing","duration","useNativeDriver","props","start","result","finished","overlay","styles","opacity","flex","Children","only","children","_renderSheet","optionsArray","icons","tintIcons","destructiveButtonIndex","textStyle","tintColor","title","titleTextStyle","message","messageTextStyle","showSeparators","separatorStyle","sheetContainer","transform","translateY","interpolate","inputRange","outputRange","sheet","undefined","length","setValue","addEventListener","Component","defaultProps","create","position","top","right","bottom","left","backgroundColor","alignItems","justifyContent","flexDirection"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n  Animated,\n  BackHandler,\n  Easing,\n  StyleSheet,\n  TouchableWithoutFeedback,\n  View,\n} from 'react-native';\nimport ActionGroup from './ActionGroup';\nimport { ActionSheetOptions } from '../types';\n\ninterface State {\n  isVisible: boolean;\n  isAnimating: boolean;\n  options: ActionSheetOptions | null;\n  onSelect: ((i: number) => void) | null;\n  overlayOpacity: any;\n  sheetOpacity: any;\n}\n\ninterface Props {\n  readonly useNativeDriver: boolean | undefined;\n}\n\nconst OPACITY_ANIMATION_IN_TIME = 225;\nconst OPACITY_ANIMATION_OUT_TIME = 195;\nconst EASING_OUT = Easing.bezier(0.25, 0.46, 0.45, 0.94);\nconst EASING_IN = Easing.out(EASING_OUT);\n\n// Has same API as https://facebook.github.io/react-native/docs/actionsheetios.html\nexport default class ActionSheet extends React.Component<Props, State> {\n  static defaultProps = {\n    useNativeDriver: true,\n  };\n\n  _actionSheetHeight = 360;\n\n  state: State = {\n    isVisible: false,\n    isAnimating: false,\n    options: null,\n    onSelect: null,\n    overlayOpacity: new Animated.Value(0),\n    sheetOpacity: new Animated.Value(0),\n  };\n\n  _setActionSheetHeight = ({ nativeEvent }: any) =>\n    (this._actionSheetHeight = nativeEvent.layout.height);\n\n  render() {\n    const { isVisible, overlayOpacity } = this.state;\n    const overlay = isVisible ? (\n      <Animated.View\n        style={[\n          styles.overlay,\n          {\n            opacity: overlayOpacity,\n          },\n        ]}\n      />\n    ) : null;\n    return (\n      <View\n        style={{\n          flex: 1,\n        }}>\n        {React.Children.only(this.props.children)}\n        {overlay}\n        {isVisible ? this._renderSheet() : null}\n      </View>\n    );\n  }\n\n  _renderSheet() {\n    const { options, isAnimating, sheetOpacity } = this.state;\n\n    if (!options) {\n      return null;\n    }\n\n    const {\n      options: optionsArray,\n      icons,\n      tintIcons,\n      destructiveButtonIndex,\n      textStyle,\n      tintColor,\n      title,\n      titleTextStyle,\n      message,\n      messageTextStyle,\n      showSeparators,\n      separatorStyle,\n    } = options;\n    return (\n      <TouchableWithoutFeedback onPress={this._selectCancelButton}>\n        <Animated.View\n          needsOffscreenAlphaCompositing={isAnimating}\n          style={[\n            styles.sheetContainer,\n            {\n              opacity: sheetOpacity,\n              transform: [\n                {\n                  translateY: sheetOpacity.interpolate({\n                    inputRange: [0, 1],\n                    outputRange: [this._actionSheetHeight, 0],\n                  }),\n                },\n              ],\n            },\n          ]}>\n          <View style={styles.sheet} onLayout={this._setActionSheetHeight}>\n            <ActionGroup\n              options={optionsArray}\n              icons={icons}\n              tintIcons={tintIcons === undefined ? true : tintIcons}\n              destructiveButtonIndex={destructiveButtonIndex}\n              onSelect={this._onSelect}\n              startIndex={0}\n              length={optionsArray.length}\n              textStyle={textStyle || {}}\n              tintColor={tintColor}\n              title={title || undefined}\n              titleTextStyle={titleTextStyle}\n              message={message || undefined}\n              messageTextStyle={messageTextStyle}\n              showSeparators={showSeparators}\n              separatorStyle={separatorStyle}\n            />\n          </View>\n        </Animated.View>\n      </TouchableWithoutFeedback>\n    );\n  }\n\n  showActionSheetWithOptions(options: ActionSheetOptions, onSelect: (i: number) => void) {\n    const { isVisible, overlayOpacity, sheetOpacity } = this.state;\n\n    if (isVisible) {\n      return;\n    }\n\n    this.setState({\n      options,\n      onSelect,\n      isVisible: true,\n      isAnimating: true,\n    });\n    overlayOpacity.setValue(0);\n    sheetOpacity.setValue(0);\n    Animated.parallel([\n      Animated.timing(overlayOpacity, {\n        toValue: 0.32,\n        easing: EASING_OUT,\n        duration: OPACITY_ANIMATION_IN_TIME,\n        useNativeDriver: this.props.useNativeDriver,\n      }),\n      Animated.timing(sheetOpacity, {\n        toValue: 1,\n        easing: EASING_OUT,\n        duration: OPACITY_ANIMATION_IN_TIME,\n        useNativeDriver: this.props.useNativeDriver,\n      }),\n    ]).start(result => {\n      if (result.finished) {\n        this.setState({\n          isAnimating: false,\n        });\n      }\n    });\n    // @ts-ignore: Argument of type '\"actionSheetHardwareBackPress\"' is not assignable to parameter of type '\"hardwareBackPress\"'\n    BackHandler.addEventListener('actionSheetHardwareBackPress', this._selectCancelButton);\n  }\n\n  _selectCancelButton = () => {\n    const { options } = this.state;\n\n    if (!options) {\n      return false;\n    }\n\n    if (typeof options.cancelButtonIndex === 'number') {\n      return this._onSelect(options.cancelButtonIndex);\n    } else {\n      return this._animateOut();\n    }\n  };\n\n  _onSelect = (index: number): boolean => {\n    const { isAnimating, onSelect } = this.state;\n\n    if (isAnimating) {\n      return false;\n    }\n\n    onSelect && onSelect(index);\n    return this._animateOut();\n  };\n\n  _animateOut = (): boolean => {\n    const { isAnimating, overlayOpacity, sheetOpacity } = this.state;\n\n    if (isAnimating) {\n      return false;\n    }\n\n    // @ts-ignore: Argument of type '\"actionSheetHardwareBackPress\"' is not assignable to parameter of type '\"hardwareBackPress\"'\n    BackHandler.removeEventListener('actionSheetHardwareBackPress', this._selectCancelButton);\n    this.setState({\n      isAnimating: true,\n    });\n    Animated.parallel([\n      Animated.timing(overlayOpacity, {\n        toValue: 0,\n        easing: EASING_IN,\n        duration: OPACITY_ANIMATION_OUT_TIME,\n        useNativeDriver: this.props.useNativeDriver,\n      }),\n      Animated.timing(sheetOpacity, {\n        toValue: 0,\n        easing: EASING_IN,\n        duration: OPACITY_ANIMATION_OUT_TIME,\n        useNativeDriver: this.props.useNativeDriver,\n      }),\n    ]).start(result => {\n      if (result.finished) {\n        this.setState({\n          isVisible: false,\n          isAnimating: false,\n        });\n      }\n    });\n    return true;\n  };\n}\n\nconst styles = StyleSheet.create({\n  overlay: {\n    position: 'absolute',\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    backgroundColor: 'black',\n  },\n  sheetContainer: {\n    position: 'absolute',\n    left: 0,\n    right: 0,\n    bottom: 0,\n    top: 0,\n    backgroundColor: 'transparent',\n    alignItems: 'flex-end',\n    justifyContent: 'center',\n    flexDirection: 'row',\n  },\n  sheet: {\n    flex: 1,\n    backgroundColor: 'transparent',\n  },\n});\n"]}